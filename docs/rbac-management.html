<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AuthTuna üêü - Asynchronous Security Framework</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>

    <style>
        :root {
            --primary: #8b5cf6; /* Indigo-500 */
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #030712; /* Gray-950 */
        }
        /* Custom scrolling for content area */
        .doc-content-area::-webkit-scrollbar { width: 8px; }
        .doc-content-area::-webkit-scrollbar-thumb { background-color: #374151; border-radius: 4px; }
        .doc-content-area::-webkit-scrollbar-track { background: #1f2937; }

        /* Prose styling equivalent for generated content */
        .prose h1, .prose h2, .prose h3, .prose h4 {
            color: #f3f4f6; /* White */
            margin-top: 2rem;
            margin-bottom: 1rem;
        }
        .prose h1 { font-size: 2.5rem; font-weight: 800; }
        .prose h2 { font-size: 1.75rem; font-weight: 700; border-bottom: 1px solid #374151; padding-bottom: 0.5rem; }
        .prose h3 { font-size: 1.25rem; font-weight: 600; }
        .prose h4 { font-size: 1.1rem; font-weight: 600; color: #a5b4fc; }
        .prose p, .prose li { color: #d1d5db; line-height: 1.7; }
        .prose ul, .prose ol { list-style-type: disc; margin-left: 1.5rem; margin-bottom: 1rem; }
        .prose a { color: #a5b4fc; text-decoration: none; }
        .prose a:hover { text-decoration: underline; }
        .prose code {
            background-color: #1f2937; /* Gray-800 */
            padding: 0.2rem 0.4rem;
            border-radius: 0.375rem;
            color: #facc15; /* Amber-400 */
            font-size: 0.875rem;
        }
        .prose pre {
            background-color: #111827; /* Gray-900 */
            border: 1px solid #374151;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            margin-top: 1rem;
            margin-bottom: 1rem;
        }
        .prose pre code {
            background: none;
            color: #e5e7eb; /* Gray-200 */
            padding: 0;
            font-size: 1rem;
        }
        .prose table { width: 100%; }
        .prose th { background-color: #1f2937; }
    </style>
</head>
<body class="text-gray-200">

    <div class="flex h-screen overflow-hidden">

        <nav id="sidebar" class="w-64 bg-gray-900 p-6 border-r border-gray-800 flex-shrink-0 overflow-y-auto absolute md:relative transform -translate-x-full md:translate-x-0 transition-transform duration-200 ease-in-out z-30">
            <div class="sticky top-0 pb-6 bg-gray-900 z-10">
                <h1 class="text-3xl font-extrabold text-indigo-400">AuthTuna üêü</h1>
                <p class="text-sm text-gray-500 mt-1">v0.1.8 Docs</p>
            </div>

            <div class="space-y-2">
                <h2 class="text-lg font-semibold text-gray-400 mt-4 mb-2 uppercase tracking-wider">Fundamentals</h2>
                <a href="index.html" class="nav-link block p-2 rounded-lg transition-colors hover:bg-gray-800">
                    Introduction & Setup
                </a>
                <a href="configuration.html" class="nav-link block p-2 rounded-lg transition-colors hover:bg-gray-800">
                    Configuration (`Settings`)
                </a>
                <a href="core-managers.html" class="nav-link block p-2 rounded-lg transition-colors hover:bg-gray-800">
                    Core Service Layer
                </a>

                <h2 class="text-lg font-semibold text-gray-400 mt-6 mb-2 uppercase tracking-wider">FastAPI Integration</h2>
                <a href="dependencies.html" class="nav-link block p-2 rounded-lg transition-colors hover:bg-gray-800">
                    Dependencies
                </a>
                <a href="permission-dependencies.html" class="nav-link block p-2 rounded-lg transition-colors hover:bg-gray-800">
                    Role & Permission Checks
                </a>
                 <a href="rbac-management.html" class="nav-link block p-2 rounded-lg transition-colors hover:bg-gray-800">
                    RBAC Management
                </a>

                <h2 class="text-lg font-semibold text-gray-400 mt-6 mb-2 uppercase tracking-wider">Built-in Features</h2>
                <a href="auth-flows.html" class="nav-link block p-2 rounded-lg transition-colors hover:bg-gray-800">
                    Authentication Flows
                </a>
                <a href="mfa.html" class="nav-link block p-2 rounded-lg transition-colors hover:bg-gray-800">
                    MFA & Social Login (SSO)
                </a>
                <a href="middleware-session.html" class="nav-link block p-2 rounded-lg transition-colors hover:bg-gray-800">
                    Middleware & Session Mgmt
                </a>
                 <a href="ui-dashboard.html" class="nav-link block p-2 rounded-lg transition-colors hover:bg-gray-800">
                    UI Dashboard
                </a>

            </div>
        </nav>

        <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 z-20 hidden md:hidden" onclick="toggleSidebar()"></div>

        <main class="flex-1 overflow-y-auto p-8 lg:p-12 doc-content-area">
             <button id="menu-button" class="md:hidden fixed top-4 right-4 bg-gray-800 p-2 rounded-lg z-40">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
            </button>
            <div id="content" class="prose max-w-4xl mx-auto">
                <h1>RBAC Management</h1>
                <p>The <code>auth_service.roles</code> manager handles all logic for creating, assigning, and checking roles and permissions. The built-in <code>/admin</code> router provides API endpoints for these actions.</p>

                <h4>Authorization for Management</h4>
                <p>AuthTuna uses a hybrid model for managing roles. An admin can assign a role if any of these are true:</p>
                <ol class="list-decimal pl-6 space-y-2">
                    <li><strong>Specific Permission:</strong> The admin has a permission like <code>roles:assign:Moderator</code>.</li>
                    <li><strong>Role Hierarchy:</strong> The admin's highest role level is greater than the target role's level (e.g., Admin at level 90 can assign Moderator at level 50).</li>
                    <li><strong>Explicit Grant:</strong> The admin's role is explicitly granted permission to assign the target role.</li>
                </ol>

                <h4>Default Roles & Users</h4>
                <p>When <code>AUTO_CREATE_DATABASE</code> is enabled, AuthTuna provisions essential roles and users for immediate administration.</p>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left text-gray-400 rounded-lg">
                        <thead class="text-xs uppercase bg-gray-800 text-gray-300">
                            <tr>
                                <th scope="col" class="py-3 px-6">Role Name</th>
                                <th scope="col" class="py-3 px-6">Level</th>
                                <th scope="col" class="py-3 px-6">Key Permissions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="bg-gray-900 border-b border-gray-800"><td>System</td><td>999</td><td>This user is for automated tasks requiring permissions like assign-ing project owner on when creating new project or smth.</td></tr>
                            <tr class="bg-gray-900 border-b border-gray-800"><td>SuperAdmin</td><td>100</td><td>Full system access.</td></tr>
                            <tr class="bg-gray-900 border-b border-gray-800"><td>Admin</td><td>90</td><td>User and role management.</td></tr>
                            <tr class="bg-gray-900 border-b border-gray-800"><td>Moderator</td><td>50</td><td>Basic user management.</td></tr>
                            <tr class="bg-gray-900 border-b border-gray-800"><td>User</td><td>0</td><td>Standard application access.</td></tr>
                        </tbody>
                        <ul>
                           <li><strong>system:</strong> Internal ID: <code>system</code>. Used for audit logging and initial role assignments. Due to its high level (999), it can be used for automated role assignments without requiring explicit grants (if the role being assigned has a level < 999).</li>
                            <li><strong>superadmin:</strong> Default Email: <code>settings.DEFAULT_SUPERADMIN_EMAIL</code>. Assigned <code>SuperAdmin</code> role.</li>
                            <li><strong>admin:</strong> Default Email: <code>settings.DEFAULT_ADMIN_EMAIL</code>. Assigned <code>Admin</code> role.</li>
                        </ul>
                    </table>
                </div>
            </div>
        </main>
    </div>
    <script>
        hljs.highlightAll();
    </script>
</body>
</html>
